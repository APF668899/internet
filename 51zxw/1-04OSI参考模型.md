# OSI参考模型
|OSI参考模型|物理层|数据链路层|网络层|传输层|会话层|表示层|应用层|
|:---|:---|:---|:---:|:---:|:---:|:---:|:---:|
|作用|完成相邻节点Bit流之间的传输,控制数据怎样放到通信介质上|完成网络之间相邻结点的可靠传输||||||
|主要设备|中继器和集线器|网卡,网桥,交换机||||||
|单位|比特流(Bit)|帧(Frame)|||||
|协议|||IP协议,IPX协议|TCP传输控制协议,UDP用户数据报协议|||

|特点|路由器|交换机|集线器|
|:---:|:---:|:---:|:---:|
|数据转发速度|慢|快|非常快|
|OSI层|第三层|第二层|第一层|
|使用的地址|逻辑地址IP|物理地址MAC|(没有地址)比特流Bit|
|广播|阻住|转发|转发|
|安全性|高|低|非常低|
## 一、物理层
### 1.中继器(Repeater)
双绞线的有效传输距离是100m,超过100m后就会数据衰减,难以保证数据的准确性,因此我们要借助中继器的作用对信号进行放大,保持原数据的相同
### 2.集线器( Hub )
相当于多个端口的中继器，内部构造是总线型的共享带宽的方式
<br>冲突域(Collision Domin)广播域( Broadease Domain)单播
<br>无论网络中接了多少个Hub,都只有一个广播域和一个冲突域

**广播式发送数据有两个地方不足:**
<br>1.用户的数据包向所有结点发送，这样就给数据的通信来了不安全的因素，一些别有用心的人就很容.易截获他人的数据包
<br>2.所有数据包都向所有节点发送，加上他是共享带宽的方式，就会更加造成网络拥塞现象，降低网络执行效率。

**提问1**:既然集线器有那么多的不足，那么我们应该什么样的场合来使用集线器呢?
<br>答:因为集线器有很多地方不足，所以它不能应用于较大的网络，但是它通常用于和交换机等设备一起分担小部分 的网络通信负荷。
<br>补充:如果网络中要使用HUB，那么PC最好在10台以内，带宽要在10/100Mb/s以 上
<br>**提问2**:广播方式有那么多不足，为什么集线器还要使用广播的方式呢?
<br>答:因为它是一个物理层的设备，基本不具备“智能”能力，更别说"学习"能力了，它也不具备交换机有具有的MAC地址表，因此他发送数据都是没有针对性的，只能使用广播。
## 二、数据链路层
数据链路层是通过MAC(Media Access Control)地址负责主机之间数据的可靠传输
### 1.网卡(Network Interface Card)
1. 网卡:也叫网络适配器，是连接计算机与网络之间的硬件设备。
2. 功能:整理计算机发往网线的数据，并且将数据分解成适当大小的数据包之后向网络上发送出去。
3. 网卡的MAC地址是在它被生产时，厂家烧录到ROM( Read Only Memory只读存储)中的，是唯一且不可以更改的。
#### 1.1查看本机网卡的MAC地址
1. 命令:ipconfig[空格]/all  
   * ipconfig/all命令是一种计算机常用命令，可以帮助我们本地计算机网络连接情况，如：IP地址，子网掩码，DNS配置，DHCP配置等等
2. Physical Address.后面是网卡MAC地址
3. AC地址用十六进制表示，占用48个比特，前24个比特表示生产厂商，后24个比特表示设备编号。
   * 8个比特是一位，一共6位，共48比特
### 2.网桥(Bridge)
作用:根据帧的终点地址处于哪一网段来进行转发和滤除。网桥对站点所处网段的了解是靠“自学习”实现的。有透明网桥、转换网桥、封装网桥、源路由选择网桥。
### 3.交换机(Switch)
显示mac地址表：***witch#*** show mac-address-table 
工作过程:根据源MAC地址学习，目标MAC地址转发
#### 3.1交换机有三种转发方式:
1. 对已知单播帧，只往对应端口转发
2. 对未知的单播帧，即交换机还没有学到的目的MAC地址，会进行广播(发往出接受端口以外的所有接口)
3. 对广播帧或者组播帧进行广播。
#### 3.2按功能可以分为三大类:
1. 传统二层交换机
   * 和集线器比，多了MAC地址表功能，属于数据链路层，有一个广播域和多个冲突域。
2. VLAN型交换机
   * 可以网管的交换机，多了VLAN功能，属于数据链路层，有多个广播域和多个冲突域。
3. 三层交换机
   * VLAN型交换机+路由器，是属于网络层的设备.出于安全考虑，实际工程中使用三层交换机校名
   
**提问**:交换机有几个冲突域和几个广播域?
<br>答:交换机有几个端口就有几个冲突域，且只有一个广播域
<br>**提问**:交换机和网桥的区别?
<br>网桥通常只有2个端口，交换机至少有4个端口，也有24,48或者更多端口的交换机。
<br>**提问**:一个两个端口的网桥有几个冲突域和广播域?
<br>答:有两个冲突域和一个广播域
<br>**提问**:网桥和集线器比，哪个工作速度更快?
<br>答:因为网桥要比集线器处理更多的事情，如添加MAC地址表，进行MAC地址表的转发，因此网桥速度要比集线器慢。

## 三、网络层(Network)
### 主要功能是完成网络中主机间的报文传输
1. 网络层协议有IP,IPX等，网络层的设备必须能识别出网络层的地址，如路由器，三层交换机等都可以根据IP地址做出路径的选择，他们都属于网络层的设备
2. 路由器是一种连接多个网络或网段的设备，它能将不同网络或网段之间的数据进行“翻译”，使它们可以互相“读懂”对方的数据，从而构成更大的网络。它是应用于不同网段或者不同网络之间的设备。
3. 路由器之所以和起到“翻译”的作用，因为它已经不是一个纯硬件设备，而是一个支持相当丰富的路由协议的软件和硬件结合的设备。它支持RIP,OSPF ,EIGRP等，这些协议都是用来连接不同网段或网络的传输层的相关协议

TCP (Transmission control protocol传输控制协议)UDP (User Datagram Protocol用户数据报协议)

它们涉及服务使用的端口号，主机根据端口号识别服务，区分会话。

端口:如WWW服务端口号: 80Telnet服务端口号: 23等

C:IWINDOWS\system32\driversletclservices记录了服务名称和对应的

端口号

区分会话:源IP， 源端口号，目标IP，目标端口号，四者共同唯一标识一个会话


4. 路由器具有判断网络地址和选择路径的功能，是网络层的一种互联设备，有隔离广播的作用，它的每一个端口都是一个单独的广播域，也是一个单独的冲突域
5. 从局域网接入广域网，使用路由器是最普遍的方式。
<br>**优点:**
    * 各互联的子网保持个子网的独立性，每个子网可以采用不同的拓扑结构，传输介质和网络协议，网络结构层次分明
    * 它可以完全屏蔽公司内部网络，有些路由器还集成了入侵防御和防火墙功能，可以用来防御攻击，保护内部网络的完全
## 传输层(Transport Layer )
1. 传输层是整个网络的关键部分，它是实现两个用户进程间端到端的可靠通信，处理数据包的错误，数据包的次序，以及一些其他关键传输问题。它向下是通信服务的最高层，弥补通信子网的差异和不足，而向上是用户功能的最底层
2. 主要功能:建立，维护和拆除传输层的连接，向网络层提供合适的服务。提供端到端的错误恢复和流量控制，向会话层提供独立于网络层的传送服务和可靠的透明数据传输
3. 传输层的相关协议
   * TCP (Transmission control protocol传输控制协议)
   * UDP (User Datagram Protocol用户数据报协议)
   * 它们涉及服务使用的端口号，主机根据端口号识别服务，区分会话。
4. 端口号
   * C:IWINDOWS\system32\driversletclservices记录了服务名称和对应的
   * 端口:如WWW(http)服务端口号: 80
   * https服务端口号: 443
   * Telnet服务端口号: 23
5. 区分会话:源IP， 源端口号，目标IP，目标端口号，四者共同唯一标识一个会话
6. 命令: netstat[空格] -n
   * 可以获取其他应用使用的端口和IP等




